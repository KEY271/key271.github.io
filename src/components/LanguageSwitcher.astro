---
import { getRelativeLocaleUrl } from "astro:i18n";
import type { Locale } from "../i18n/ui";

type Props = {
    locale: Locale;
};

const { locale } = Astro.props;
const otherLocale = locale === "en" ? ("ja" as const) : ("en" as const);

const pathname = Astro.url.pathname;
const parts = pathname.split("/").filter(Boolean);
const bareParts =
    parts[0] && ["en", "ja"].includes(parts[0]) ? parts.slice(1) : parts;
const barePath = bareParts.join("/");
const otherLocalePath = `${getRelativeLocaleUrl(otherLocale, barePath)}${Astro.url.search}${Astro.url.hash}`;
---

<a href={otherLocalePath}>
    {otherLocale === "en" ? "English" : "日本語"}
</a>

<style>
    a {
        text-decoration: none;
        color: white;
    }
</style>
